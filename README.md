# benchmarks-optimization
Цель задания - исследование бенчмарками исходной функции SlowSearch (файл common.go), оптимизация данной функции на основе профилирования pprof.

Принятые решения для оптимизации:
1. Функции пакета регулярных выражений regexp заменены на функции стандартного пакета strings для поиска подстроки в строке и замены элемента в строке.
2. Для того чтобы не загружать сразу все данные из текстового файла был использован Scanner из пакета bufio, что позволило загружать данные из файла поэтапно.
3. Был изменен анмаршелинг данных в структуру вместо мапы.
4. Функция анмаршелинга данных была применена из пакета easyjson.
5. Было уменьшено количество циклов в процессе выполнения функции, все операции осуществлены в одном цикле Scanner`а, который проходит по всему документу.
6. У созданной структуры User поля имеют тип string, что позволило уйти от конвертации типов (interface -> string).
7. Информация о пользователе (который использует Android и MSIE) сразу выводится в конце итерации цикла вместо накопления данных в одной переменной.

Результаты:
```
Производительность исходной функции SlowSearch:
goos: windows
goarch: amd64
pkg: hw3
cpu: Intel(R) Core(TM) i7-8550U CPU @ 1.80GHz
BenchmarkSlow-8               42          29373357 ns/op        20208563 B/op     189846 allocs/op
PASS
ok      hw3     2.763s

Производительность модернизированной функции FastSearch:
goos: windows
goarch: amd64
pkg: hw3
cpu: Intel(R) Core(TM) i7-8550U CPU @ 1.80GHz
BenchmarkFast-8              632           1780900 ns/op          482893 B/op       6483 allocs/op
PASS
ok      hw3     2.896s
```


Наименование и назначение основных файлов проекта:
1. fast.go - разработанная более быстрая и менее ресурсоемкая функция FastSearch.
2. Отчет об увеличении производительности.docx - написанный отчет с описанием исходный данных, постановкой задачи и выводах.
3. HW_readme.md - описание условий задания.
4. common.go - приложенный файл с функцией SlowSearch к условиям задания.
5. main_test.go - приложенные тесты к условиям задания.
6. папка data - папка с приложенным текстовым файлом для его парсинга.
7. папка forjson - папка для генерации функций пакета easyjson.
